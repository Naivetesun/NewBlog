<!DOCTYPE html>
<html lang="en-us">
<head>
    <title>Java反射机制学习笔记 &middot; Vorblock&#39;Blog</title>
    <meta name="generator" content="Hugo 0.54.0" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="Vorblock">
    
      <meta name="description" content="Java反射机制">
    
    
    <link rel="canonical" href="https://naivete.cc/2018/07/25/java%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <link rel="icon" href="https://naivete.cc/favicon.ico">
    <link rel="apple-touch-icon" href="https://naivete.cc/apple-touch-icon.png"/>
    <link rel="stylesheet" href="https://naivete.cc/css/font-awesome-all.css">
    <link rel="stylesheet" href="https://naivete.cc/css/style.css">
    <link rel="stylesheet" href="https://naivete.cc/css/monokai.css">
    <link rel="stylesheet" href="https://naivete.cc/fancybox/jquery.fancybox.css">
    
    <link href='https://fonts.loli.net/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
    <link href='https://fonts.loli.net/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1124809_i7yk6ugtyum.css">
    
    
    <meta property="og:title" content="Java反射机制学习笔记" />
<meta property="og:description" content="Java反射机制" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://naivete.cc/2018/07/25/java%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" />
<meta property="article:published_time" content="2018-07-25T16:40:20&#43;08:00"/>
<meta property="article:modified_time" content="2018-07-25T16:40:20&#43;08:00"/>

    
    
<meta itemprop="name" content="Java反射机制学习笔记">
<meta itemprop="description" content="Java反射机制">


<meta itemprop="datePublished" content="2018-07-25T16:40:20&#43;08:00" />
<meta itemprop="dateModified" content="2018-07-25T16:40:20&#43;08:00" />
<meta itemprop="wordCount" content="1752">



<meta itemprop="keywords" content="Java," />

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Java反射机制学习笔记"/>
<meta name="twitter:description" content="Java反射机制"/>
<meta name="twitter:site" content="@Vorblock"/>

    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
<div class="container">


<div id="container">
	<header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="https://naivete.cc/" id="logo">
          
          <i class="logo" style="background-image: url('https://naivete.cc/css/images/logo.png')"></i>
          
          <span class="site-title">Vorblock&#39;Blog</span>
      </a>
      <nav id="main-nav">
          
          
          <a class="main-nav-link" href="https://naivete.cc/">Home</a>
          
          
          
          <a class="main-nav-link" href="https://naivete.cc/categories/">Categories</a>
          
          
          
          <a class="main-nav-link" href="https://naivete.cc/tags/">Tags</a>
          
          

          
          <a class="main-nav-link" href="/about/">About</a>
          

          
          
          
          
          
          
          
      </nav>
        <nav id="sub-nav">
          <div class="profile" id="profile-nav">
            <a id="profile-anchor" href="javascript:;"><img class="avatar" src="https://naivete.cc/css/images/favicon.ico"><i class="fas fa-caret-down"></i></a>
          </div>
        </nav>
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
              <input type="search" name="q" class="search-form-input" placeholder="Search">
              <button type="submit" class="search-form-submit"><i class="fas fa-search"></i>
              </button>
              <input type="hidden" name="sitesearch" value="https://naivete.cc/" />
         </form>
        </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tbody>
          <tr>
          
          
          <td><a class="main-nav-link" href="https://naivete.cc/">Home</a></td>
          
          
          
          <td><a class="main-nav-link" href="https://naivete.cc/categories/">Categories</a></td>
          
          
          
          <td><a class="main-nav-link" href="https://naivete.cc/tags/">Tags</a></td>
          
          

          
          <td><a class="main-nav-link" href="/about/">About</a></td>
          

          
          
          
          
          
          
          
          <td>
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
          <input type="search" name="q" class="search-form-input" placeholder="Search">
          <input type="hidden" name="sitesearch" value="https://naivete.cc/" />
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</header>

   	
   	<div class="outer">
   	
    	<aside id="profile">
  <div class="inner profile-inner">
    <div class="base-info profile-block">
      
      <img id="avatar" src="https://my-md-1253484710.cos.ap-chengdu.myqcloud.com/tx.jpg"/>
      
      <h2 id="name">Vorblock</h2>
      <h3 id="title">嘤嘤嘤 - CTFer - 移动安全</h3>
      
      
    </div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        24
        <span>Posts</span>
      </div>
      <div class="article-info-block">
        
          28
        
        <span>
            Tags
        </span>
      </div>
    </div>
    <div class="profile-block social-links">
      <table>
        <tr>
          
<td><a href="//github.com/Naivetesun" target="_blank" title="GitHub"><i class="fab fa-github"></i></i></a></td>




 














<td><a href="//twitter.com/Vorblock" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a></td>



<td><a href="//weibo.com/274077334" target="_blank" title="weibo"><i class="fab fa-weibo"></i></a></td>



<td><a href="//t.me/Vorblock" target="_blank" title="telegram"><i class="fab fa-telegram"></i></a></td>



<td><a href="mailto:naivetesun@gmail.com" target="_blank" title="email"><i class="fas fa-envelope"></i></a></td>



<td><a href="//space.bilibili.com/6477559" target="_blank" title="bilibili"><i class="iconfont icon-CN_bilibiliB" ></i></a></td>






          <td><a href="https://naivete.cc/index.xml" target="_blank" title="RSS"><i class="fa fa-rss"></i></a></td>
        </tr>
      </table>
    </div>
  </div>
</aside>

    

    <section id="main">
    
    <article id="page-undefined" class="article article-type-page" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        

        <header class="article-header">
    <a href="https://naivete.cc/2018/07/25/java%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
    <h1 class="article-title" itemprop="name">
        Java反射机制学习笔记
    </h1>
    </a>
    <div class="article-meta">

        
        <div class="article-date">
            <i class="fas fa-calendar"></i>
            <time datetime="2018-07-25 16:40:20 &#43;0800 CST" itemprop="datePublished">2018-07-25</time>
            &middot;
            1752
            words
            &middot;
            9
            minute read
        </div>
        
        
            
            
            <div class="article-category">
                <i class="fas fa-folder"></i>
                
                
                <a class="article-category-link" href="https://naivete.cc/categories/java">Java</a>
                &middot;
                
                
                <a class="article-category-link" href="https://naivete.cc/categories/%E7%AC%94%E8%AE%B0">笔记</a>
                
                
            </div>
            
        

        
            
            
            <div class="article-category">
                <i class="fas fa-tags"></i>
                
                
                <a class="article-category-link" href="https://naivete.cc/tags/java">Java</a>
                
                
            </div>
            
        
    </div>
</header>

        <div class="article-entry" itemprop="articleBody">
            

<h2 id="java-反射机制学习记录">Java 反射机制学习记录</h2>

<p>在逆向中反射也是能经常看见，之前理解不是很深透，现在来重点学习一下，做个笔记。</p>

<h3 id="什么是反射机制">什么是反射机制？</h3>

<p>反射(Reflection)是Java 程序开发语言的特征之一，它允许运行中的 Java 程序获取自身的信息，并且可以操作类或对象的内部属性。 通俗一点：在动态运行时，获取到一个类的所有方法以及成员。简而言之，通过反射，我们可以在<strong>运行时</strong>获得程序或程序集中每一个类型的成员和成员的信息。</p>

<h3 id="作用">作用？</h3>

<ul>
<li>1.在运行时判断任意一个对象所属的类；<br /></li>
<li>2.在运行时构造任意一个类的对象；<br /></li>
<li>3.在运行时判断任意一个类所具有的成员变量和方法（通过反射甚至可以调用private方法）；<br /></li>
<li>4.在运行时调用任意一个对象的方法<br />
<br /></li>
</ul>

<h5 id="是运行时而不是编译时"><strong>是运行时而不是编译时</strong></h5>

<ul>
<li>获取某些类的一些变量，调用某些类的私有方法。<br /></li>
<li>增加代码的灵活性。很多主流框架都使用了反射技术.像ssh框架都采用两种技术 xml做配置文件+反射技术.<br />
<br /></li>
</ul>

<h3 id="基本使用">基本使用</h3>

<p>反射相关的类一般都在java.lang.relfect 包里。</p>

<ol>
<li>获取Class对象 3种方法<br />
<br /></li>
</ol>

<p>(1)使用Class类的forName静态方法:</p>

<pre><code class="language-java">   public static Class&lt;?&gt; forName(String className)
   //在JDBC开发中常用此方法加载数据库驱动:
   Class.forName(driver);
</code></pre>

<p>(2)直接获取某一个对象的class，比如:</p>

<pre><code class="language-java">   Class&lt;?&gt; klass = int.class;
   Class&lt;?&gt; classInt = Integer.TYPE;
</code></pre>

<p>(3)调用某个对象的getClass()方法,比如:</p>

<pre><code class="language-java">   StringBuilder str = new StringBuilder(&quot;123&quot;);
   Class&lt;?&gt; klass = str.getClass();
</code></pre>

<ol>
<li>判断是否为某一个类的实例<br />
<br /></li>
</ol>

<p>一般使用instanceof来判断，也可以借助反射中的Class对象的isInstance()方法来判断  是一个Native方法：</p>

<pre><code class="language-java">   public native boolean isInstance(Object obj);
</code></pre>

<ol>
<li>创建实例<br />
<br /></li>
</ol>

<p>通过放射来生成对象两种方式：</p>

<p>（1）使用Class对象的newInstance()方法来创建Class对象对应类的实例。</p>

<pre><code>   Class&lt;?&gt; c = String.class;
   Object str = c.newInstance();
</code></pre>

<p>（2）先通过Class对象获取指定的Constructor对象，再调用Constructor对象的newInstance()方法来创建实例。这种方法可以用指定的构造器构造类的实例。</p>

<pre><code>   //获取String所对应的Class对象
   Class&lt;?&gt; c = String.class;
   //获取String类带一个String参数的构造器
   Constructor constructor = c.getConstructor(String.class);
   //根据构造器创建实例
   Object obj = constructor.newInstance(&quot;23333&quot;);
   System.out.println(obj);
</code></pre>

<ol>
<li>获取方法<br />
<br /></li>
</ol>

<p>getDeclaredMethods()方法返回类或接口声明的所有方法，包括公共、保护、默认（包）访问和私有方法，但不包括继承的方法。</p>

<pre><code>   public Method[] getDeclaredMethods() throws SecurityException
</code></pre>

<p>getMethods()方法返回某个类的所有公用（public）方法，包括其继承类的公用方法。</p>

<pre><code>   public Method[] getMethods() throws SecurityException
</code></pre>

<p>getMethod方法返回一个特定的方法，其中第一个参数为方法名称，后面的参数为方法的参数对应Class的对象</p>

<pre><code>   public Method getMethod(String name, Class&lt;?&gt;... parameterTypes)
</code></pre>

<p>eg:</p>

<pre><code class="language-java">import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;


public class test {
    public static void test1() throws IllegalAccessException, InstantiationException,
            NoSuchMethodException, InvocationTargetException {
        Class&lt;?&gt; c = methodClass.class;
        Object object = c.newInstance();
        Method[] methods = c.getMethods();
        Method[] declaredMethods = c.getDeclaredMethods();
        Method method = c.getMethod(&quot;add&quot;, int.class, int.class); //获取add方法
        System.out.println(&quot;getMethods获取的方法：&quot;);
        for (Method m : methods)
            System.out.println(m);
        System.out.println(&quot;getDeclaredMethods获取的方法：&quot;);
        for (Method m : declaredMethods)
            System.out.println(m);
    }

    public static void main(String[] args) {
        try{
            test1();

        }catch (Exception e){
            e.printStackTrace();
        }

    }
}

class methodClass {
    public final int fuck = 3;
    public int add(int a,int b) {
        return a+b;
    }
    public int sub(int a,int b) {
        return a+b;
    }
}
</code></pre>

<p><img src="http://my-md-1253484710.coscd.myqcloud.com/20180725151348.png" alt="" /></p>

<ol>
<li>获取构造器信息<br />
<br /></li>
</ol>

<p>通过Class类的getConstructor方法得到Constructor类的一个实例，而Constructor类有一个newInstance方法可以创建一个对象实例:</p>

<pre><code class="language-java">   public T newInstance(Object ... initargs)
</code></pre>

<ol>
<li>获取类的成员字段信息<br />
<br /></li>
</ol>

<p><code>getFiled</code>: 访问公有的成员变量</p>

<p><code>getDeclaredField</code>：所有已声明的成员变量。但不能得到其父类的成员变量</p>

<p><code>getFileds</code>和<code>getDeclaredFields</code>用法同上（参照Method）</p>

<ol>
<li>调用方法<br />
<br /></li>
</ol>

<p>获取到方法后使用invoke()方法来调用这个方法</p>

<pre><code class="language-java">   public Object invoke(Object obj, Object... args)
           throws IllegalAccessException, IllegalArgumentException,
              InvocationTargetException
</code></pre>

<p>eg：</p>

<pre><code class="language-java">   public class test1 {
   
       public static void main(String[] args) throws IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException {
           Class&lt;?&gt; klass = methodClass.class;
           //创建methodClass的实例
           Object obj = klass.newInstance();
           //获取methodClass类的add方法
           Method method = klass.getMethod(&quot;add&quot;,int.class,int.class);
           //调用method对应的方法 =&gt; add(1,4)
           Object result = method.invoke(obj,1,4);
           System.out.println(result);
       }
   
   }
   
   class methodClass {
   
       public final int fuck = 3;
       public int add(int a,int b) {
           return a+b;
       }
       public int sub(int a,int b) {
           return a+b;
       }
   }
</code></pre>

<ol>
<li>创建数组<br />
<br /></li>
</ol>

<pre><code class="language-java">   public static void testArray() throws ClassNotFoundException {
           Class&lt;?&gt; cls = Class.forName(&quot;java.lang.String&quot;);
           Object array = Array.newInstance(cls,25); //通过Array.newInstance()
           //往数组里添加内容
           Array.set(array,0,&quot;hello&quot;);  //Array类为java.lang.reflect.Array
           Array.set(array,1,&quot;Java&quot;);
           Array.set(array,2,&quot;fuck&quot;);
           Array.set(array,3,&quot;Scala&quot;);
           Array.set(array,4,&quot;Clojure&quot;);
           //获取某一项的内容
           System.out.println(Array.get(array,3));
       }
</code></pre>

<pre><code class="language-java">   public static Object newInstance(Class&lt;?&gt; componentType, int length)
           throws NegativeArraySizeException {
           return newArray(componentType, length);
       }
</code></pre>

<pre><code class="language-java">   private static native Object newArray(Class&lt;?&gt; componentType, int length)
           throws NegativeArraySizeException;
</code></pre>

<pre><code class="language-c++">   arrayOop Reflection::reflect_new_array(oop element_mirror, jint length, TRAPS) {
     if (element_mirror == NULL) {
       THROW_0(vmSymbols::java_lang_NullPointerException());
     }
     if (length &lt; 0) {
       THROW_0(vmSymbols::java_lang_NegativeArraySizeException());
     }
     if (java_lang_Class::is_primitive(element_mirror)) {
       Klass* tak = basic_type_mirror_to_arrayklass(element_mirror, CHECK_NULL);
       return TypeArrayKlass::cast(tak)-&gt;allocate(length, THREAD);
     } else {
       Klass* k = java_lang_Class::as_Klass(element_mirror);
       if (k-&gt;oop_is_array() &amp;&amp; ArrayKlass::cast(k)-&gt;dimension() &gt;= MAX_DIM) {
         THROW_0(vmSymbols::java_lang_IllegalArgumentException());
       }
       return oopFactory::new_objArray(k, length, THREAD);
     }
   }
</code></pre>

<p>Array类的set()和get()方法都为Native方法，在HotSpot JVM里分别对应Reflection::array_set和Reflection::array_get方法</p>

<ol>
<li><p>获取泛型</p>

<p>getGenericHelper(HashMap<String, Person> map)</p></li>
</ol>

<pre><code class="language-java">   public static  void getGenericType() {
           try {
               Method method =TestHelper.class.getDeclaredMethod(&quot;getGenericHelper&quot;,HashMap.class);
               Type[] genericParameterTypes = method.getGenericParameterTypes();
               // 检验是否为空
               if (null == genericParameterTypes || genericParameterTypes.length &lt; 1) {
                   return ;
               }
               // 取 getGenericHelper 方法的第一个参数
   
               ParameterizedType parameterizedType=(ParameterizedType)genericParameterTypes[0];
               Type rawType = parameterizedType.getRawType();
               System.out.println(&quot;----&gt; rawType=&quot; + rawType);
               Type[] actualTypeArguments = parameterizedType.getActualTypeArguments();
               if (actualTypeArguments==genericParameterTypes || actualTypeArguments.length&lt;1) {
                   return ;
               }
               //  打印出每一个类型          
               for (int i = 0; i &lt; actualTypeArguments.length; i++) {
                   Type type = actualTypeArguments[i];
                   System.out.println(&quot;----&gt; type=&quot; + type);
               }
           } catch (Exception e) {
   
           }
   
       }
</code></pre>

<ol>
<li><p>获得 Metho,Field,Constructor 的访问权限</p>

<pre><code class="language-java">   int modifiers = method.getModifiers(); 
   Modifier.toString(modifiers); 
</code></pre></li>
</ol>

<h3 id="invoke方法">Invoke方法</h3>

<p>比较重点</p>

<p>invoke方法的实现：</p>

<pre><code class="language-java">@CallerSensitive
public Object invoke(Object obj, Object... args)
    throws IllegalAccessException, IllegalArgumentException,
       InvocationTargetException
{
    if (!override) {
        if (!Reflection.quickCheckMemberAccess(clazz, modifiers)) {
            Class&lt;?&gt; caller = Reflection.getCallerClass();
            checkAccess(caller, clazz, obj, modifiers);
        }
    }
    MethodAccessor ma = methodAccessor;             // read volatile
    if (ma == null) {
        ma = acquireMethodAccessor();
    }
    return ma.invoke(obj, args);
}
</code></pre>

<ol>
<li>权限检查<br />
<br /></li>
</ol>

<p>首先检查AccessibleObject的override属性的值 。AccessibleObject 类是 Field、Method 和 Constructor 对象的基类 。override 默认为false,调试需要权限调用规则，反正不需要。</p>

<p>默认情况下首先用Reflection.quickCheckMemberAccess(clazz, modifiers)方法检查方法是否为public，如果是的话跳出本步；如果不是public方法，那么用Reflection.getCallerClass()方法获取调用这个方法的Class对象，这是一个native方法:</p>

<pre><code class="language-java">   @CallerSensitive
       public static native Class&lt;?&gt; getCallerClass();
</code></pre>

<pre><code class="language-java">   JNIEXPORT jclass JNICALL Java_sun_reflect_Reflection_getCallerClass__
   (JNIEnv *env, jclass unused)
   {
       return JVM_GetCallerClass(env, JVM_CALLER_DEPTH);
   }
</code></pre>

<pre><code class="language-c++">   JVM_ENTRY(jclass, JVM_GetCallerClass(JNIEnv* env, int depth))
     JVMWrapper(&quot;JVM_GetCallerClass&quot;);
   
     // Pre-JDK 8 and early builds of JDK 8 don't have a CallerSensitive annotation; or
     // sun.reflect.Reflection.getCallerClass with a depth parameter is provided
     // temporarily for existing code to use until a replacement API is defined.
     if (SystemDictionary::reflect_CallerSensitive_klass() == NULL || depth != JVM_CALLER_DEPTH) {
       Klass* k = thread-&gt;security_get_caller_class(depth);
       return (k == NULL) ? NULL : (jclass) JNIHandles::make_local(env, k-&gt;java_mirror());
     }
   
     // Getting the class of the caller frame.
     //
     // The call stack at this point looks something like this:
     //
     // [0] [ @CallerSensitive public sun.reflect.Reflection.getCallerClass ]
     // [1] [ @CallerSensitive API.method                                   ]
     // [.] [ (skipped intermediate frames)                                 ]
     // [n] [ caller                                                        ]
     vframeStream vfst(thread);
     // Cf. LibraryCallKit::inline_native_Reflection_getCallerClass
     for (int n = 0; !vfst.at_end(); vfst.security_next(), n++) {
       Method* m = vfst.method();
       assert(m != NULL, &quot;sanity&quot;);
       switch (n) {
       case 0:
         // This must only be called from Reflection.getCallerClass
         if (m-&gt;intrinsic_id() != vmIntrinsics::_getCallerClass) {
           THROW_MSG_NULL(vmSymbols::java_lang_InternalError(), &quot;JVM_GetCallerClass must only be called from Reflection.getCallerClass&quot;);
         }
         // fall-through
       case 1:
         // Frame 0 and 1 must be caller sensitive.
         if (!m-&gt;caller_sensitive()) {
           THROW_MSG_NULL(vmSymbols::java_lang_InternalError(), err_msg(&quot;CallerSensitive annotation expected at frame %d&quot;, n));
         }
         break;
       default:
         if (!m-&gt;is_ignored_by_security_stack_walk()) {
           // We have reached the desired frame; return the holder class.
           return (jclass) JNIHandles::make_local(env, m-&gt;method_holder()-&gt;java_mirror());
         }
         break;
       }
     }
     return NULL;
   JVM_END
</code></pre>

<p>获取了这个Class对象caller后用checkAccess方法做一次快速的权限校验 :</p>

<pre><code class="language-java">   volatile Object securityCheckCache;
   
       void checkAccess(Class&amp;lt;?&amp;gt; caller, Class&amp;lt;?&amp;gt; clazz, Object obj, int modifiers)
           throws IllegalAccessException
       {
           if (caller == clazz) {  // 快速校验
               return;             // 权限通过校验
           }
           Object cache = securityCheckCache;  // read volatile
           Class&amp;lt;?&amp;gt; targetClass = clazz;
           if (obj != null
               &amp;amp;&amp;amp; Modifier.isProtected(modifiers)
               &amp;amp;&amp;amp; ((targetClass = obj.getClass()) != clazz)) {
               // Must match a 2-list of { caller, targetClass }.
               if (cache instanceof Class[]) {
                   Class&amp;lt;?&amp;gt;[] cache2 = (Class&amp;lt;?&amp;gt;[]) cache;
                   if (cache2[1] == targetClass &amp;amp;&amp;amp;
                       cache2[0] == caller) {
                       return;     // ACCESS IS OK
                   }
                   // (Test cache[1] first since range check for [1]
                   // subsumes range check for [0].)
               }
           } else if (cache == caller) {
               // Non-protected case (or obj.class == this.clazz).
               return;             // ACCESS IS OK
           }
   
           // If no return, fall through to the slow path.
           slowCheckMemberAccess(caller, clazz, obj, modifiers, targetClass);
       }
</code></pre>

<p>先快速检查，未通过的话建立缓存，中间再检查；</p>

<p>如果都没有通过：进行更详细的检查;</p>

<pre><code class="language-java">   // Keep all this slow stuff out of line:
   void slowCheckMemberAccess(Class&amp;lt;?&amp;gt; caller, Class&amp;lt;?&amp;gt; clazz, Object obj, int modifiers,
                              Class&amp;lt;?&amp;gt; targetClass)
       throws IllegalAccessException
   {
       Reflection.ensureMemberAccess(caller, clazz, obj, modifiers);
   
       // Success: Update the cache.
       Object cache = ((targetClass == clazz)
                       ? caller
                       : new Class&amp;lt;?&amp;gt;[] { caller, targetClass });
   
       // Note:  The two cache elements are not volatile,
       // but they are effectively final.  The Java memory model
       // guarantees that the initializing stores for the cache
       // elements will occur before the volatile write.
       securityCheckCache = cache;         // write volatile
   }
</code></pre>

<p>用Reflection.ensureMemberAccess方法继续检查权限，若检查通过就更新缓存，这样下一次同一个类调用同一个方法时就不用执行权限检查了，这是一种简单的缓存机制。</p>

<ol>
<li><p>调用MethodAccessor的invoke方法</p>

<p>由sun.reflect.MethodAccessor 处理</p>

<pre><code class="language-java">   /** This interface provides the declaration for
       java.lang.reflect.Method.invoke(). Each Method object is
       configured with a (possibly dynamically-generated) class which
       implements this interface.
   */
    public interface MethodAccessor {    //是一个接口
       /** Matches specification in {@link java.lang.reflect.Method} */
       public Object invoke(Object obj, Object[] args)
           throws IllegalArgumentException, InvocationTargetException;
   }
</code></pre>

<p>分析其Usage可得它的具体实现类有:</p>

<ul>
<li>sun.reflect.DelegatingMethodAccessorImpl<br /></li>
<li>sun.reflect.MethodAccessorImpl<br /></li>
<li>sun.reflect.NativeMethodAccessorImpl<br />
<br /></li>
</ul>

<p>methodAccessor实例由reflectionFactory对象操控生成，它在AccessibleObject下的声明如下:</p>

<pre><code class="language-java">   // Reflection factory used by subclasses for creating field,
   // method, and constructor accessors. Note that this is called
   // very early in the bootstrapping process.
   static final ReflectionFactory reflectionFactory =
       AccessController.doPrivileged(
           new sun.reflect.ReflectionFactory.GetReflectionFactoryAction());
</code></pre>

<p>sun.reflect.ReflectionFactory类的源码：</p>

<pre><code class="language-java">   public class ReflectionFactory {
       
       private static boolean initted = false;
       private static Permission reflectionFactoryAccessPerm
           = new RuntimePermission(&quot;reflectionFactoryAccess&quot;);
       private static ReflectionFactory soleInstance = new ReflectionFactory();
       // Provides access to package-private mechanisms in java.lang.reflect
       private static volatile LangReflectAccess langReflectAccess;
       
       // 这里设计得非常巧妙
       // &quot;Inflation&quot; mechanism. Loading bytecodes to implement
       // Method.invoke() and Constructor.newInstance() currently costs
       // 3-4x more than an invocation via native code for the first
       // invocation (though subsequent invocations have been benchmarked
       // to be over 20x faster). Unfortunately this cost increases
       // startup time for certain applications that use reflection
       // intensively (but only once per class) to bootstrap themselves.
       // To avoid this penalty we reuse the existing JVM entry points
       // for the first few invocations of Methods and Constructors and
       // then switch to the bytecode-based implementations.
       //
       // Package-private to be accessible to NativeMethodAccessorImpl
       // and NativeConstructorAccessorImpl
       private static boolean noInflation        = false;
       private static int     inflationThreshold = 15;
       
       //......
       
    //这是生成MethodAccessor的方法
       public MethodAccessor newMethodAccessor(Method method) {
           checkInitted();
       
           if (noInflation &amp;&amp; !ReflectUtil.isVMAnonymousClass(method.getDeclaringClass())) {
               return new MethodAccessorGenerator().
                   generateMethod(method.getDeclaringClass(),
                                  method.getName(),
                                  method.getParameterTypes(),
                                  method.getReturnType(),
                                  method.getExceptionTypes(),
                                  method.getModifiers());
           } else {
               NativeMethodAccessorImpl acc =
                   new NativeMethodAccessorImpl(method);
               DelegatingMethodAccessorImpl res =
                   new DelegatingMethodAccessorImpl(acc);
               acc.setParent(res);
               return res;
           }
       }
       
       //......
       
       /** We have to defer full initialization of this class until after
       the static initializer is run since java.lang.reflect.Method's
       static initializer (more properly, that for
       java.lang.reflect.AccessibleObject) causes this class's to be
       run, before the system properties are set up. */
       private static void checkInitted() {
           if (initted) return;
           AccessController.doPrivileged(
               new PrivilegedAction&lt;Void&gt;() {
                   public Void run() {
                       // Tests to ensure the system properties table is fully
                       // initialized. This is needed because reflection code is
                       // called very early in the initialization process (before
                       // command-line arguments have been parsed and therefore
                       // these user-settable properties installed.) We assume that
                       // if System.out is non-null then the System class has been
                       // fully initialized and that the bulk of the startup code
                       // has been run.
       
                       if (System.out == null) {
                           // java.lang.System not yet fully initialized
                           return null;
                       }
       
                       String val = System.getProperty(&quot;sun.reflect.noInflation&quot;);
                       if (val != null &amp;&amp; val.equals(&quot;true&quot;)) {
                           noInflation = true;
                       }
       
                       val = System.getProperty(&quot;sun.reflect.inflationThreshold&quot;);
                       if (val != null) {
                           try {
                               inflationThreshold = Integer.parseInt(val);
                           } catch (NumberFormatException e) {
                               throw new RuntimeException(&quot;Unable to parse property sun.reflect.inflationThreshold&quot;, e);
                           }
                       }
       
                       initted = true;
                       return null;
                   }
               });
       }
   }
</code></pre>

<p>MethodAccessor实现有两个版本，一个是Java版本，一个是native版本 。</p>

<p>Java实现的版本在初始化时需要较多时间，但长久来说性能较好；native版本正好相反，启动时相对较快，但运行时间长了之后速度就比不过Java版了</p>

<p>为了尽可能地减少性能损耗，HotSpot JDK采用“inflation”的技巧：让Java方法在被反射调用时，开头若干次使用native版，等反射调用次数超过阈值时则生成一个专用的MethodAccessor实现类，生成其中的invoke()方法的字节码，以后对该Java方法的反射调用就会使用Java版本。 这项优化是从JDK 1.4开始的。</p>

<ol>
<li><p>在JVM层面探究invoke0方法</p>

<p>invoke0方法是一个native方法,它在HotSpot JVM里调用JVM_InvokeMethod函数:</p></li>
</ol></li>
</ol>

<pre><code class="language-c++">          JNIEXPORT jobject JNICALL Java_sun_reflect_NativeMethodAccessorImpl_invoke0
          (JNIEnv *env, jclass unused, jobject m, jobject obj, jobjectArray args)
          {
              return JVM_InvokeMethod(env, m, obj, args);
          }
</code></pre>

<p>openjdk/hotspot/src/share/vm/prims/jvm.cpp</p>

<pre><code class="language-c++">JVM_ENTRY(jobject, JVM_InvokeMethod(JNIEnv *env, jobject method, jobject obj, jobjectArray args0))
  JVMWrapper(&quot;JVM_InvokeMethod&quot;);
  Handle method_handle;
  if (thread-&gt;stack_available((address) &amp;method_handle) &gt;= JVMInvokeMethodSlack) {
    method_handle = Handle(THREAD, JNIHandles::resolve(method));
    Handle receiver(THREAD, JNIHandles::resolve(obj));
    objArrayHandle args(THREAD, objArrayOop(JNIHandles::resolve(args0)));
    oop result = Reflection::invoke_method(method_handle(), receiver, args, CHECK_NULL);
    jobject res = JNIHandles::make_local(env, result);
    if (JvmtiExport::should_post_vm_object_alloc()) {
      oop ret_type = java_lang_reflect_Method::return_type(method_handle());
      assert(ret_type != NULL, &quot;sanity check: ret_type oop must not be NULL!&quot;);
      if (java_lang_Class::is_primitive(ret_type)) {
        // Only for primitive type vm allocates memory for java object.
        // See box() method.
        JvmtiExport::post_vm_object_alloc(JavaThread::current(), result);
      }
    }
    return res;
  } else {
    THROW_0(vmSymbols::java_lang_StackOverflowError());
  }
JVM_END
</code></pre>

<p>openjdk/hotspot/src/share/vm/runtime/reflection.cpp :</p>

<pre><code class="language-c++">oop Reflection::invoke_method(oop method_mirror, Handle receiver, objArrayHandle args, TRAPS) {
  oop mirror             = java_lang_reflect_Method::clazz(method_mirror);
  int slot               = java_lang_reflect_Method::slot(method_mirror);
  bool override          = java_lang_reflect_Method::override(method_mirror) != 0;
  objArrayHandle ptypes(THREAD, objArrayOop(java_lang_reflect_Method::parameter_types(method_mirror)));

  oop return_type_mirror = java_lang_reflect_Method::return_type(method_mirror);
  BasicType rtype;
  if (java_lang_Class::is_primitive(return_type_mirror)) {
    rtype = basic_type_mirror_to_basic_type(return_type_mirror, CHECK_NULL);
  } else {
    rtype = T_OBJECT;
  }

  instanceKlassHandle klass(THREAD, java_lang_Class::as_Klass(mirror));
  Method* m = klass-&gt;method_with_idnum(slot);
  if (m == NULL) {
    THROW_MSG_0(vmSymbols::java_lang_InternalError(), &quot;invoke&quot;);
  }
  methodHandle method(THREAD, m);

  return invoke(klass, method, receiver, override, ptypes, rtype, args, true, THREAD);
}
</code></pre>

<ol>
<li>Java版的实现<br />
<br /></li>
</ol>

<p>Java版MethodAccessor的生成使用MethodAccessorGenerator实现  下面是开头的注释：</p>

<pre><code class="language-java">/** Generator for sun.reflect.MethodAccessor and
    sun.reflect.ConstructorAccessor objects using bytecodes to
    implement reflection. A java.lang.reflect.Method or
    java.lang.reflect.Constructor object can delegate its invoke or
    newInstance method to an accessor using native code or to one
    generated by this class. (Methods and Constructors were merged
    together in this class to ensure maximum code sharing.) */
</code></pre>

        </div>
        
        <footer class="article-footer">
    <a data-url="https://naivete.cc/2018/07/25/java%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-id="8a17ac1cba3f697d63f40d5d9a04a0b7" class="article-share-link">
        <i class="fas fa-share"></i>
        Share
    </a>
    

    <script>
    (function ($) {
        
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
    </script>
</footer>

    </div>

    
<nav id="article-nav">
    
    <a href="https://naivete.cc/2018/07/22/android%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E9%98%B2%E6%8A%A4%E5%92%8C%E9%80%86%E5%90%91%E5%88%86%E6%9E%90-%E5%9F%BA%E7%A1%80%E7%AF%87/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">
          Older
      </strong>
      <div class="article-nav-title">Android应用安全防护和逆向分析-基础篇④</div>
    </a>
    

    
    <a href="https://naivete.cc/2018/07/30/%E8%BD%ACandroid-native-hook%E5%B7%A5%E5%85%B7%E5%AE%9E%E8%B7%B5/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">
          Newer
      </strong>
      <div class="article-nav-title">(转)Android Native Hook工具实践</div>
    </a>
    
</nav>


</article>



    </section>

   	
    	<aside id="sidebar">
    
<div class="widget-wrap">
    <h3 class="widget-title">
        Recents
    </h3>
    <div class="widget">
        <ul id="recent-post">
            
            <li>
                <div class="item-thumbnail">
                    <a href="https://naivete.cc/2019/02/28/rop%E7%BB%83%E4%B9%A0/" class="thumbnail">
                    
                        <span class="thumbnail-image thumbnail-none"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="https://naivete.cc/categories/pwn">
                        PWN
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="https://naivete.cc/2019/02/28/rop%E7%BB%83%E4%B9%A0/" class="title">ROP练习</a></p>
                    <p class="item-date">
                        <time datetime="2019-02-28 00:22:36 &#43;0800 CST" itemprop="datePublished">2019-02-28</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="https://naivete.cc/2019/02/20/ctf-pwn%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95-ctfwiki_1%E6%A0%88%E6%BA%A2%E5%87%BA/" class="thumbnail">
                    
                        <span class="thumbnail-image thumbnail-none"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="https://naivete.cc/categories/pwn">
                        PWN
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="https://naivete.cc/2019/02/20/ctf-pwn%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95-ctfwiki_1%E6%A0%88%E6%BA%A2%E5%87%BA/" class="title">CTF PWN刷题记录 CTFWiki_1栈溢出</a></p>
                    <p class="item-date">
                        <time datetime="2019-02-20 00:17:21 &#43;0800 CST" itemprop="datePublished">2019-02-20</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="https://naivete.cc/2019/02/02/frida%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83_2/" class="thumbnail">
                    
                        <span style="background-image:url(http://md.kangsiji.cn/frida.png)" alt="Java反射机制学习笔记" class="thumbnail-image"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="https://naivete.cc/categories/hook">
                        HOOK
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="https://naivete.cc/2019/02/02/frida%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83_2/" class="title">Frida从入门到放弃_2</a></p>
                    <p class="item-date">
                        <time datetime="2019-02-02 20:39:26 &#43;0800 CST" itemprop="datePublished">2019-02-02</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="https://naivete.cc/2019/01/22/frida%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83_1/" class="thumbnail">
                    
                        <span style="background-image:url(http://md.kangsiji.cn/frida.png)" alt="Java反射机制学习笔记" class="thumbnail-image"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="https://naivete.cc/categories/hook">
                        HOOK
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="https://naivete.cc/2019/01/22/frida%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83_1/" class="title">Frida从入门到放弃_1</a></p>
                    <p class="item-date">
                        <time datetime="2019-01-22 20:39:26 &#43;0800 CST" itemprop="datePublished">2019-01-22</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="https://naivete.cc/2019/01/02/radare2-cutter%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" class="thumbnail">
                    
                        <span class="thumbnail-image thumbnail-none"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="https://naivete.cc/categories/re">
                        RE
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="https://naivete.cc/2019/01/02/radare2-cutter%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" class="title">radare2&#43;cutter使用指南</a></p>
                    <p class="item-date">
                        <time datetime="2019-01-02 20:39:26 &#43;0800 CST" itemprop="datePublished">2019-01-02</time>
                    </p>
                </div>
            </li>
            
        </ul>
    </div>
</div>


    


<div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
        <ul class="category-list">
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/ai">
                    ai
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/android">
                    android
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/android%E5%AE%89%E5%85%A8">
                    android安全
                </a>
                <span class="category-list-count">12</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/arm">
                    arm
                </a>
                <span class="category-list-count">3</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/crypto">
                    crypto
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/cve">
                    cve
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/hook">
                    hook
                </a>
                <span class="category-list-count">2</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/java">
                    java
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/linux%E5%86%85%E6%A0%B8">
                    linux内核
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/llvm">
                    llvm
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/pwn">
                    pwn
                </a>
                <span class="category-list-count">3</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/re">
                    re
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90">
                    漏洞分析
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86">
                    漏洞原理
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/%E7%AC%94%E8%AE%B0">
                    笔记
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0">
                    读书笔记
                </a>
                <span class="category-list-count">5</span>
            </li>
            
        </ul>
    </div>
</div>




    


<div class="widget-wrap">
    <h3 class="widget-title">
        Tags
    </h3>
    <div class="widget">
        <ul class="category-list">
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/ai">
                    ai
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/androd">
                    androd
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/android">
                    android
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/android%E5%AE%89%E5%85%A8">
                    android安全
                </a>
                <span class="category-list-count">11</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/arm">
                    arm
                </a>
                <span class="category-list-count">2</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/crypto">
                    crypto
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/cve">
                    cve
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/cve-2018-9375">
                    cve-2018-9375
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/frida">
                    frida
                </a>
                <span class="category-list-count">2</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/hook">
                    hook
                </a>
                <span class="category-list-count">4</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/ida">
                    ida
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/java">
                    java
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/linux">
                    linux
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/ollvm">
                    ollvm
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/pwn">
                    pwn
                </a>
                <span class="category-list-count">3</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/qume">
                    qume
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/radare2">
                    radare2
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/re">
                    re
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/rop">
                    rop
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/uaf">
                    uaf
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/%E5%AF%86%E7%A0%81%E5%AD%A6">
                    密码学
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/%E5%B7%A5%E5%85%B7">
                    工具
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/%E6%8C%87%E4%BB%A4%E4%BF%AE%E5%A4%8D">
                    指令修复
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0">
                    机器学习
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/%E6%A0%91%E8%8E%93%E6%B4%BE">
                    树莓派
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/%E6%A8%A1%E6%8B%9F%E5%99%A8">
                    模拟器
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/%E7%8E%AF%E5%A2%83">
                    环境
                </a>
                <span class="category-list-count">1</span>
            </li>
            
            <li class="category-list-item">
                
                <a class="category-list-link" href="https://naivete.cc/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0">
                    读书笔记
                </a>
                <span class="category-list-count">5</span>
            </li>
            
        </ul>
    </div>
</div>




    


<div class="widget-wrap">
    <h3 class="widget-title">
        Tag cloud
    </h3>
    <div class="widget tagcloud">
        
        
        <a href="https://naivete.cc/tags/ai" style="font-size: 12px;">ai</a>
        
        
        <a href="https://naivete.cc/tags/androd" style="font-size: 12px;">androd</a>
        
        
        <a href="https://naivete.cc/tags/android" style="font-size: 12px;">android</a>
        
        
        <a href="https://naivete.cc/tags/android%E5%AE%89%E5%85%A8" style="font-size: 12px;">android安全</a>
        
        
        <a href="https://naivete.cc/tags/arm" style="font-size: 12px;">arm</a>
        
        
        <a href="https://naivete.cc/tags/crypto" style="font-size: 12px;">crypto</a>
        
        
        <a href="https://naivete.cc/tags/cve" style="font-size: 12px;">cve</a>
        
        
        <a href="https://naivete.cc/tags/cve-2018-9375" style="font-size: 12px;">cve-2018-9375</a>
        
        
        <a href="https://naivete.cc/tags/frida" style="font-size: 12px;">frida</a>
        
        
        <a href="https://naivete.cc/tags/hook" style="font-size: 12px;">hook</a>
        
        
        <a href="https://naivete.cc/tags/ida" style="font-size: 12px;">ida</a>
        
        
        <a href="https://naivete.cc/tags/java" style="font-size: 12px;">java</a>
        
        
        <a href="https://naivete.cc/tags/linux" style="font-size: 12px;">linux</a>
        
        
        <a href="https://naivete.cc/tags/ollvm" style="font-size: 12px;">ollvm</a>
        
        
        <a href="https://naivete.cc/tags/pwn" style="font-size: 12px;">pwn</a>
        
        
        <a href="https://naivete.cc/tags/qume" style="font-size: 12px;">qume</a>
        
        
        <a href="https://naivete.cc/tags/radare2" style="font-size: 12px;">radare2</a>
        
        
        <a href="https://naivete.cc/tags/re" style="font-size: 12px;">re</a>
        
        
        <a href="https://naivete.cc/tags/rop" style="font-size: 12px;">rop</a>
        
        
        <a href="https://naivete.cc/tags/uaf" style="font-size: 12px;">uaf</a>
        
        
        <a href="https://naivete.cc/tags/%E5%AF%86%E7%A0%81%E5%AD%A6" style="font-size: 12px;">密码学</a>
        
        
        <a href="https://naivete.cc/tags/%E5%B7%A5%E5%85%B7" style="font-size: 12px;">工具</a>
        
        
        <a href="https://naivete.cc/tags/%E6%8C%87%E4%BB%A4%E4%BF%AE%E5%A4%8D" style="font-size: 12px;">指令修复</a>
        
        
        <a href="https://naivete.cc/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0" style="font-size: 12px;">机器学习</a>
        
        
        <a href="https://naivete.cc/tags/%E6%A0%91%E8%8E%93%E6%B4%BE" style="font-size: 12px;">树莓派</a>
        
        
        <a href="https://naivete.cc/tags/%E6%A8%A1%E6%8B%9F%E5%99%A8" style="font-size: 12px;">模拟器</a>
        
        
        <a href="https://naivete.cc/tags/%E7%8E%AF%E5%A2%83" style="font-size: 12px;">环境</a>
        
        
        <a href="https://naivete.cc/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0" style="font-size: 12px;">读书笔记</a>
        
    </div>
</div>





    <div id="toTop" class="fas fa-angle-up"></div>
</aside>

    
	</div>
</div>

<footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019
      Powered by <a href="//gohugo.io">Hugo</a>. Theme by <a href="https://github.com/digitalcraftsman/hugo-icarus-theme/tree/master">Icarus</a>.
    </div>
  </div>
</footer>


<script src="https://naivete.cc/fancybox/jquery.fancybox.pack.js"></script>
<script src="https://naivete.cc/js/script.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>


<script>hljs.initHighlightingOnLoad();</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>




</body>
</html>